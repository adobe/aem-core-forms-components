<!--/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
  ~ Copyright 2021 Adobe
  ~
  ~ Licensed under the Apache License, Version 2.0 (the "License");
  ~ you may not use this file except in compliance with the License.
  ~ You may obtain a copy of the License at
  ~
  ~     http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~ Unless required by applicable law or agreed to in writing, software
  ~ distributed under the License is distributed on an "AS IS" BASIS,
  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  ~ See the License for the specific language governing permissions and
  ~ limitations under the License.
  ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/-->

<sly data-sly-use.model="com.adobe.cq.forms.core.components.models.formsportal.SearchAndLister"
     data-sly-use.logic="${'searchlister.js' @ layout=model.layout}"
     data-sly-use.clientlib="${'/libs/granite/sightly/templates/clientlib.html'}"
     data-sly-use.items="${logic.layoutPath}"></sly>
<div class="cmp-searchlister" data-cmp-is="formssearch" id="${model.id}" data-queryPath="${resource.path}.model.json">
    <h1 class="cmp-searchlister__heading" data-sly-text="${model.title}">Forms Portal</h1>
    <div class="cmp-searchlister__seperator" data-sly-resource.seperator="${logic.seperator}"></div>
    <div class="cmp-searchlister-search" data-sly-test="${!model.searchDisabled || !model.sortDisabled}">
        <div class="cmp-searchlister-search__box" data-sly-test.textSearch="${!model.searchDisabled}">
            <input class="cmp-searchlister-search__box--text" data-cmp-hook-formssearch="input" type="text" placeholder="Search">
        </div>
        <div class="cmp-searchlister-search__sortbutton--wrapper" data-sly-test.advancedSearch="${!model.sortDisabled}">
            <select class="cmp-searchlister-search__sortbutton cmp-searchlister-search__sortbutton--right" data-cmp-hook-formssearch="sort">
                <option value="" selected="selected">Sort By</option>
                <option value="asc">Ascending</option>
                <option value="desc">Descending</option>
            </select>
        </div>
    </div>
    <div class="cmp-searchlister-results" data-cmp-hook-formssearch="results"></div>
    <div class="cmp-searchlister__more--wrapper">
        <div class="cmp-searchlister__more" data-cmp-hook-formssearch="more">Load more</div>
    </div>

    <script data-cmp-hook-formssearch="itemTemplate"
            type="x-template"
            data-sly-call="${items.layout @ style=model.layout, hideTime=true, hideFooter=true, context='html'}">
    </script>
    <sly data-sly-call="${clientlib.all @ categories=logic.clientlibs}"></sly>
</div>
